<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="朽木自雕">
        <link rel="canonical" href="https://burningmyself.github.io/tool/gitflow/">
        <link rel="shortcut icon" href="../../favicon.ico">
        
        <title>GitFlow - BurningMyself</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-36723568-3', 'mkdocs.org');
            ga('send', 'pageview');
        </script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">BurningMyself</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">介绍</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">技术博文 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">.NET</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../net/c_sharp/">C# 6</a>
</li>
            
<li >
    <a href="../../net/c_docker/">.Ner Core Docker 部署</a>
</li>
            
<li >
    <a href="../../net/c_mysql_nginx/">使用 Docker 容器化部署 ASP.NET Core + MySQL + Nginx</a>
</li>
            
<li >
    <a href="../../net/c_core_safety/">让你的ASP.NET Core应用程序更安全</a>
</li>
            
<li >
    <a href="../../net/c_core_study_route/">ASP.NET Core开发者指南</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Java</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../java/feature/">Java特性</a>
</li>
            
<li >
    <a href="../../java/load-class/">Java类加载</a>
</li>
            
<li >
    <a href="../../java/orm/">Orm的优缺点</a>
</li>
            
<li >
    <a href="../../java/bio-nio/">BIO与NIO</a>
</li>
            
<li >
    <a href="../../java/rocketmq/rmq-1/">RocketMq下载与安装</a>
</li>
            
<li >
    <a href="../../java/springAnnotation/">Spring常用注解</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Python</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../python/feature/">Python特性</a>
</li>
            
<li >
    <a href="../../python/str_joint/">Python字符拼接</a>
</li>
            
<li >
    <a href="../../python/syntax_rule/">Python语法技巧</a>
</li>
            
<li >
    <a href="../../python/fabric/">远程部署神器 Fabric</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">PHP</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../php/kj/">框架</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Web</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../web/es6/">es6语法</a>
</li>
            
<li >
    <a href="../../web/ali_js_style/">阿里js样式规范</a>
</li>
            
<li >
    <a href="../../web/node.js/">node.js文档</a>
</li>
            
<li >
    <a href="../../web/react/">React 开发者指南</a>
</li>
            
<li >
    <a href="../../dart/syntax/">Dart语法学习</a>
</li>
            
<li >
    <a href="../../web/react_interview/">React 面试</a>
</li>
            
<li >
    <a href="../../web/js_tool_method/">js 工具函数</a>
</li>
            
<li >
    <a href="../../web/vue_cp_react/">vue与react比较</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">SQL</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../sql/mysql_yh/">MySQL优化</a>
</li>
            
<li >
    <a href="../../sql/mysql_yh17/">MySQL优化</a>
</li>
            
<li >
    <a href="../../sql/mysql_log/">MySQL日志</a>
</li>
            
<li >
    <a href="../../sql/mysql_index/">MySQL索引</a>
</li>
            
<li >
    <a href="../../sql/mysql_pxc/">MySQL PXC集群</a>
</li>
            
<li >
    <a href="../../sql/mysql_use/">MySQL 数据库应用</a>
</li>
            
<li >
    <a href="../../sql/sql_server_master/">Sql Server 主从备份</a>
</li>
            
<li >
    <a href="../../sql/data_split/">数据库之互联网常用分库分表方案</a>
</li>
            
<li >
    <a href="../../sql/mybatis/">Mybatis使用心德</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Linux</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../linux/often/">常用命令</a>
</li>
            
<li >
    <a href="../../linux/ope/">实用的Linux 命令</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Docker</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../docker/docker/">Docker全科</a>
</li>
            
<li >
    <a href="../../docker/docker-compose/">docker和docker-compose 配置 mysql mongodb redis nginx jenkins 环境</a>
</li>
            
<li >
    <a href="../../docker/docker-jenkins/">Docker部署Jenkins</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Tool</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../git/">Git</a>
</li>
            
<li >
    <a href="../gitquestion/">Git问题处理</a>
</li>
            
<li class="active">
    <a href="./">GitFlow</a>
</li>
            
<li >
    <a href="../gitbook/">GitBook</a>
</li>
            
<li >
    <a href="../gitcmr/">Git提交日志规范</a>
</li>
            
<li >
    <a href="../markdown/">Markdown</a>
</li>
            
<li >
    <a href="../cicd/">CI/CD</a>
</li>
            
<li >
    <a href="../mkdocs/">mkdocs简单使用</a>
</li>
            
<li >
    <a href="../gitstudy/">Git的黑魔法</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">微服务 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../micro/spring-cloud/">基于SpringCloud的微服务架构演变史</a>
</li>
                                    
<li >
    <a href="../../micro/fbs-lock/">分布式锁</a>
</li>
                                    
<li >
    <a href="../../micro/design/">微服务设计</a>
</li>
                                    
<li >
    <a href="../../micro/distrimsg/">分布式系统与消息的投递</a>
</li>
                                    
<li >
    <a href="../../micro/ddd/">基于DDD的微服务设计和开发实战</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">经验分析 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../exp/devops/">DevOps</a>
</li>
                                    
<li >
    <a href="../../exp/micro-service/">Micro-Service</a>
</li>
                                    
<li >
    <a href="../../exp/raft-gossip/">Raft算法和Gossip协议</a>
</li>
                                    
<li >
    <a href="../../exp/cl/">集群和负载均衡</a>
</li>
                                    
<li >
    <a href="../../exp/ai/">人工智能</a>
</li>
                                    
<li >
    <a href="../../exp/code-principle/">代码原则</a>
</li>
                                    
<li >
    <a href="../../exp/techbig/">如何成为技术大牛</a>
</li>
                                    
<li >
    <a href="../../exp/learnweetout/">程序员如何技术成长</a>
</li>
                                    
<li >
    <a href="../../exp/pt/">产品与技术</a>
</li>
                                    
<li >
    <a href="../../exp/four_deep_learning/">深度学习框架</a>
</li>
                                    
<li >
    <a href="../../exp/tl/">在阿里做了5年技术Leader，我总结出这些套路！</a>
</li>
                                    
<li >
    <a href="../../exp/cto/">CTO 技能图谱</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">医学 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../doctor/ae/">脑炎</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">构架 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../framework/split/">构架拆分</a>
</li>
                                    
<li >
    <a href="../../framework/fgb/">分布式、高并发、多线程</a>
</li>
                                    
<li >
    <a href="../../framework/agility/">如何理解敏捷开发</a>
</li>
                                    
<li >
    <a href="../../framework/fwork/">走向架构师必备的技能</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">情感 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../emotion/eq/">情商</a>
</li>
                                    
<li >
    <a href="../../emotion/workheard/">工作心得</a>
</li>
                                    
<li >
    <a href="../../emotion/lookbook/">看书</a>
</li>
                                    
<li >
    <a href="../../emotion/fmf/">4种男朋友</a>
</li>
                                    
<li >
    <a href="../../emotion/notheart/">不上心</a>
</li>
                                    
<li >
    <a href="../../emotion/selfdiscipline/">自律</a>
</li>
                                    
<li >
    <a href="../../emotion/notlike/">喜欢与不喜欢</a>
</li>
                                    
<li >
    <a href="../../emotion/latemarry/">晚婚</a>
</li>
                                    
<li >
    <a href="../../emotion/understand/">追女生要明白这些事</a>
</li>
                                    
<li >
    <a href="../../emotion/backup/">备胎</a>
</li>
                                    
<li >
    <a href="../../emotion/chase/">为什么追不到她</a>
</li>
                                    
<li >
    <a href="../../emotion/livefail/">为什么活着失败</a>
</li>
                                    
<li >
    <a href="../../emotion/emotion/">情绪管理</a>
</li>
                                    
<li >
    <a href="../../emotion/abolish/">废掉的三个迹象</a>
</li>
                                    
<li >
    <a href="../../emotion/uptime/">余生，好好珍惜</a>
</li>
                                    
<li >
    <a href="../../emotion/losecome/">所有的失去，都会以另一种方式归来</a>
</li>
                                    
<li >
    <a href="../../emotion/threeheart/">人生有这三种好心态</a>
</li>
                                    
<li >
    <a href="../../emotion/onelike/">一个感情真相</a>
</li>
                                    
<li >
    <a href="../../emotion/notruth/">情商与道理</a>
</li>
                                    
<li >
    <a href="../../emotion/smf/">六种男人远离</a>
</li>
                                    
<li >
    <a href="../../emotion/select/">决定接下来人生归属的，不是努力，而是选择</a>
</li>
                                    
<li >
    <a href="../../emotion/nolike/">被你拉黑的那个人，你一定很喜欢吧</a>
</li>
                                    
<li >
    <a href="../../emotion/onepath/">余生，学会一个人走，不管有没有人陪</a>
</li>
                                    
<li >
    <a href="../../emotion/twopath/">往后余生还很精彩，别被熬夜拖垮了</a>
</li>
                                    
<li >
    <a href="../../emotion/lifetime/">心态好的人，一辈子都好</a>
</li>
                                    
<li >
    <a href="../../emotion/hearttoheart/">将心比心，方得人心</a>
</li>
                                    
<li >
    <a href="../../emotion/ttt/">别睡太晚，别爱太满，别要太多</a>
</li>
                                    
<li >
    <a href="../../emotion/profess/">表白</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../gitquestion/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../gitbook/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/burningmyself/burningmyself.github.io/edit/master/docs/tool/gitflow.md">Edit on burningmyself.github.io</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#gitgitflow">Git基本命令和GitFlow工作流</a></li>
            <li><a href="#git">git 团队协作的一些命令</a></li>
            <li><a href="#gitgitflow_1">Git工作流指南：Gitflow工作流</a></li>
            <li><a href="#_9">最后</a></li>
            <li><a href="#_10">参考资料</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="gitgitflow">Git基本命令和GitFlow工作流<a class="headerlink" href="#gitgitflow" title="Permanent link">&para;</a></h1>
<hr />
<h3 id="git">git 团队协作的一些命令<a class="headerlink" href="#git" title="Permanent link">&para;</a></h3>
<ol>
<li>开分支</li>
</ol>
<pre class="codehilite"><code>git branch 新分支名
例如，在master分支下，新开一个开发分支：
git branch dev</code></pre>


<ol>
<li>切换到新分支</li>
</ol>
<pre class="codehilite"><code>git checkout 分支名
例如，在master分支下，切换到新开的dev：
git checkout dev</code></pre>


<ol>
<li>开分支和切换分支合并到一个命令</li>
</ol>
<pre class="codehilite"><code>git checkout -b 新分支名
例如，新开一个开发分支，并立即切换到该分支：
git checkout -b dev</code></pre>


<ol>
<li>切换回原分支</li>
</ol>
<pre class="codehilite"><code>git checkout 原分支名
例如，切换回master
git checkout master
注意：当前分支有修改，还未commit的时候，会切换失败，应当先commit，但可以不用push</code></pre>


<ol>
<li>合并分支</li>
</ol>
<pre class="codehilite"><code>git merge 需要合并的分支名
例如，刚刚已经切换回master，现在需要合并dev的内容：
git merge dev
建议在GitLab(或者其他git系统)上面创建merge request的形式来进行分支的合并和代码审核。</code></pre>


<ol>
<li>查看本地分支列表</li>
</ol>
<pre class="codehilite"><code>git branch -a
前面带remotes/origin 的，是远程分支</code></pre>


<ol>
<li>查看远程分支列表</li>
</ol>
<pre class="codehilite"><code>git branch -r</code></pre>


<ol>
<li>向远程提交本地新开的分支</li>
</ol>
<pre class="codehilite"><code>git push origin 新分支名
例如，刚刚在master下新开的dev分支：
git push origin dev</code></pre>


<ol>
<li>删除远程分支</li>
</ol>
<pre class="codehilite"><code>git push origin :远程分支名
例如，删除刚刚提交到远程的dev分支：
git push origin :dev</code></pre>


<ol>
<li>删除本地分支</li>
</ol>
<pre class="codehilite"><code>git branch 分支名称 -d
例如，在master分支下，删除新开的dev分支：
git branch dev -d
注意：如果dev的更改，push到远程，在GitLab(或者其他git系统)上面进行了merge操作，但是本地master没有pull最新的代码，会删除不成功，可以先git pull origin master，或者强制删除
git branch dev -D</code></pre>


<ol>
<li>更新分支列表信息</li>
</ol>
<pre class="codehilite"><code>git fetch -p</code></pre>


<ol>
<li>TortoiseGit(乌龟git)</li>
</ol>
<p>不可否认，在windows下，这个是个不错的工具。不管你是命令行新手还是重度使用者，我觉得都可以尝试一下。</p>
<h3 id="gitgitflow_1">Git工作流指南：Gitflow工作流<a class="headerlink" href="#gitgitflow_1" title="Permanent link">&para;</a></h3>
<p>在你开始阅读之前，请记住：流程应被视作为指导方针，而非“铁律”。我们只是想告诉你可能的做法。因此，如果有必要的话，你可以组合使用不同的流程</p>
<p><img alt="gitflow" src="../../img/git-workflows-gitflow.png" /></p>
<p>Gitflow工作流定义了一个围绕项目发布的严格分支模型。虽然比功能分支工作流复杂几分，但提供了用于一个健壮的用于管理大型项目的框架。
Gitflow工作流没有用超出功能分支工作流的概念和命令，而是为不同的分支分配一个很明确的角色，并定义分支之间如何和什么时候进行交互。除了使用功能分支，在做准备、维护和记录发布也使用各自的分支。当然你可以用上功能分支工作流所有的好处：Pull Requests、隔离实验性开发和更高效的协作。</p>
<h4 id="_1">工作方式<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<p>Gitflow工作流仍然用中央仓库作为所有开发者的交互中心。和其它的工作流一样，开发者在本地工作并push分支到要中央仓库中。</p>
<h4 id="_2">历史分支<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<p>相对使用仅有的一个master分支，Gitflow工作流使用2个分支来记录项目的历史。master分支存储了正式发布的历史，而develop分支作为功能的集成分支。这样也方便master分支上的所有提交分配一个版本号。</p>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-1historical.png" />
剩下要说明的问题围绕着这2个分支的区别展开。</p>
<h4 id="_3">功能分支<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>每个新功能位于一个自己的分支，这样可以push到中央仓库以备份和协作。但功能分支不是从master分支上拉出新分支，而是使用develop分支作为父分支。当新功能完成时，合并回develop分支。新功能提交应该从不直接与master分支交互。</p>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-2feature.png" /></p>
<p>注意，从各种含义和目的上来看，功能分支加上develop分支就是功能分支工作流的用法。但Gitflow工作流没有在这里止步。</p>
<h4 id="_4">发布分支<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-3release.png" /></p>
<p>一旦develop分支上有了做一次发布（或者说快到了既定的发布日）的足够功能，就从develop分支上fork一个发布分支。新建的分支用于开始发布循环，所以从这个时间点开始之后新的功能不能再加到这个分支上 —— 这个分支只应该做Bug修复、文档生成和其它面向发布任务。一旦对外发布的工作都完成了，发布分支合并到master分支并分配一个版本号打好Tag。另外，这些从新建发布分支以来的做的修改要合并回develop分支。
使用一个用于发布准备的专门分支，使得一个团队可以在完善当前的发布版本的同时，另一个团队可以继续开发下个版本的功能。
这也打造定义良好的开发阶段（比如，可以很轻松地说，『这周我们要做准备发布版本4.0』，并且在仓库的目录结构中可以实际看到）。</p>
<h4 id="_5">常用的分支约定：<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<pre class="codehilite"><code>用于新建发布分支的分支: develop
用于合并的分支: master
分支命名: release-* 或 release/*</code></pre>


<h4 id="_6">维护分支<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-4maintenance.png" /></p>
<p>维护分支或说是热修复（hotfix）分支用于生成快速给产品发布版本（production releases）打补丁，这是唯一可以直接从master分支fork出来的分支。修复完成，修改应该马上合并回master分支和develop分支（当前的发布分支），master分支应该用新的版本号打好Tag。
为Bug修复使用专门分支，让团队可以处理掉问题而不用打断其它工作或是等待下一个发布循环。你可以把维护分支想成是一个直接在master分支上处理的临时发布。</p>
<h4 id="_7">示例<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>下面的示例演示本工作流如何用于管理单个发布循环。假设你已经创建了一个中央仓库。</p>
<h5 id="_8">创建开发分支<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h5>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-5createdev.png" /></p>
<p>第一步为master分支配套一个develop分支。简单来做可以本地创建一个空的develop分支，push到服务器上：</p>
<pre class="codehilite"><code>git branch develop
git push -u origin develop</code></pre>


<p>以后这个分支将会包含了项目的全部历史，而master分支将只包含了部分历史。其它开发者这时应该克隆中央仓库，建好develop分支的跟踪分支：</p>
<pre class="codehilite"><code>git clone ssh://user@host/path/to/repo.git
git checkout -b develop origin/develop</code></pre>


<p>现在每个开发都有了这些历史分支的本地拷贝。</p>
<h5 id="ab">工程师A和工程师B开始开发新功能<a class="headerlink" href="#ab" title="Permanent link">&para;</a></h5>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-6maryjohnbeginnew.png" />
这个示例中，工程师A和工程师B开始各自的功能开发。他们需要为各自的功能创建相应的分支。新分支不是基于master分支，而是应该基于develop分支：</p>
<pre class="codehilite"><code>git checkout -b some-feature develop</code></pre>


<p>他们用老套路添加提交到各自功能分支上：编辑、暂存、提交：</p>
<pre class="codehilite"><code>git status
git add
git commit</code></pre>


<h5 id="a">工程师A完成功能开发<a class="headerlink" href="#a" title="Permanent link">&para;</a></h5>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-7maryfinishes.png" />
添加了提交后，工程师A觉得她的功能OK了。如果团队使用Pull Requests，这时候可以发起一个用于合并到develop分支。否则她可以直接合并到她本地的develop分支后push到中央仓库：</p>
<pre class="codehilite"><code>git pull origin develop
git checkout develop
git merge some-feature
git push
git branch -d some-feature</code></pre>


<p>第一条命令在合并功能前确保develop分支是最新的。注意，功能决不应该直接合并到master分支。冲突解决方法和集中式工作流一样。</p>
<h5 id="a_1">工程师A开始准备发布<a class="headerlink" href="#a_1" title="Permanent link">&para;</a></h5>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-8maryprepsrelease.png" /></p>
<p>这个时候工程师B正在实现他的功能，工程师A开始准备她的第一个项目正式发布。像功能开发一样，她用一个新的分支来做发布准备。这一步也确定了发布的版本号：</p>
<pre class="codehilite"><code>git checkout -b release-0.1 develop</code></pre>


<p>这个分支是清理发布、执行所有测试、更新文档和其它为下个发布做准备操作的地方，像是一个专门用于改善发布的功能分支。</p>
<p>只要工程师A创建这个分支并push到中央仓库，这个发布就是功能冻结的。任何不在develop分支中的新功能都推到下个发布循环中。</p>
<h5 id="a_2">工程师A完成发布<a class="headerlink" href="#a_2" title="Permanent link">&para;</a></h5>
<p><img alt="gitflow" src="../../img/git-workflow-release-cycle-9maryfinishes.png" /></p>
<p>一旦准备好了对外发布，工程师A合并修改到master分支和develop分支上，删除发布分支。合并回develop分支很重要，因为在发布分支中已经提交的更新需要在后面的新功能中也要是可用的。另外，如果工程师A的团队要求Code Review，这是一个发起Pull Request的理想时机。</p>
<pre class="codehilite"><code>git checkout master
git merge release-0.1
git push
git checkout develop
git merge release-0.1
git push
git branch -d release-0.1</code></pre>


<p>发布分支是作为功能开发（develop分支）和对外发布（master分支）间的缓冲。只要有合并到master分支，就应该打好Tag以方便跟踪。</p>
<pre class="codehilite"><code>git tag -a 0.1 -m &quot;Initial public release&quot; master
git push --tags</code></pre>


<p>Git有提供各种勾子（hook），即仓库有事件发生时触发执行的脚本。可以配置一个勾子，在你push中央仓库的master分支时，自动构建好对外发布。</p>
<h5 id="bug">最终用户发现Bug<a class="headerlink" href="#bug" title="Permanent link">&para;</a></h5>
<p><img alt="gitflow" src="../../img/git-workflow-gitflow-enduserbug.png" /></p>
<p>对外发布后，工程师A回去和工程师B一起做下个发布的新功能开发，直到有最终用户开了一个Ticket抱怨当前版本的一个Bug。为了处理Bug，工程师A（或工程师B）从master分支上拉出了一个维护分支，提交修改以解决问题，然后直接合并回master分支：</p>
<pre class="codehilite"><code>git checkout -b issue-#001 master</code></pre>


<p>Fix the bug</p>
<pre class="codehilite"><code>git checkout master
git merge issue-#001
git push</code></pre>


<p>就像发布分支，维护分支中新加这些重要修改需要包含到develop分支中，所以工程师A要执行一个合并操作。然后就可以安全地删除这个分支了：</p>
<pre class="codehilite"><code>git checkout develop
git merge issue-#001
git push
git branch -d issue-#001</code></pre>


<h3 id="_9">最后<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>Git是一个不错的版本管理工具，但也仅仅是工具。记住，这里演示的工作流只是可能用法的例子，而不是在实际工作中使用Git不可违逆的条例。所以不要畏惧按自己需要对工作流的用法做取舍。不变的目标就是让Git为你所用。</p>
<h3 id="_10">参考资料<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<ol>
<li><a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow/">gitflow</a></li>
<li><a href="https://nvie.com/posts/a-successful-git-branching-model/">gitflow</a></li>
</ol></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>BurningMyself</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
