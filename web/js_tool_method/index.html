<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="朽木自雕">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>js 工具函数 - BurningMyself</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "js \u5de5\u5177\u51fd\u6570";
    var mkdocs_page_input_path = "web\\js_tool_method.md";
    var mkdocs_page_url = "/web/js_tool_method/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> BurningMyself</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">介绍</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">技术博文</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">.NET</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../net/c_sharp/">C# 6</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../net/c_docker/">.Ner Core Docker 部署</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../net/c_mysql_nginx/">使用 Docker 容器化部署 ASP.NET Core + MySQL + Nginx</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../net/c_core_safety/">让你的ASP.NET Core应用程序更安全</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../net/c_core_study_route/">ASP.NET Core开发者指南</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Java</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../java/feature/">Java特性</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/load-class/">Java类加载</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/orm/">Orm的优缺点</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/bio-nio/">BIO与NIO</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/rocketmq/rmq-1/">RocketMq下载与安装</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/springAnnotation/">Spring常用注解</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Python</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../python/feature/">Python特性</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../python/str_joint/">Python字符拼接</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../python/syntax_rule/">Python语法技巧</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../python/fabric/">远程部署神器 Fabric</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">PHP</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../php/kj/">框架</a>
                </li>
    </ul>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Web</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../es6/">es6语法</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../ali_js_style/">阿里js样式规范</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../node.js/">node.js文档</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../react/">React 开发者指南</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../dart/syntax/">Dart语法学习</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../react_interview/">React 面试</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">js 工具函数</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#javascript">JavaScript 工具函数大全</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#_1">数组</a></li>
        
            <li><a class="toctree-l5" href="#_2">函数</a></li>
        
            <li><a class="toctree-l5" href="#_3">字符串</a></li>
        
            <li><a class="toctree-l5" href="#_4">对象</a></li>
        
            <li><a class="toctree-l5" href="#_5">数字</a></li>
        
            <li><a class="toctree-l5" href="#_6">浏览器操作及其它</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../vue_cp_react/">vue与react比较</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">SQL</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_yh/">MySQL优化</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_yh17/">MySQL优化</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_log/">MySQL日志</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_index/">MySQL索引</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_pxc/">MySQL PXC集群</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_use/">MySQL 数据库应用</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/sql_server_master/">Sql Server 主从备份</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/data_split/">数据库之互联网常用分库分表方案</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mybatis/">Mybatis使用心德</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Linux</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../linux/often/">常用命令</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../linux/ope/">实用的Linux 命令</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Docker</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../docker/docker/">Docker全科</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../docker/docker-compose/">docker和docker-compose 配置 mysql mongodb redis nginx jenkins 环境</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../docker/docker-jenkins/">Docker部署Jenkins</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Tool</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/git/">Git</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitquestion/">Git问题处理</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitflow/">GitFlow</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitbook/">GitBook</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitcmr/">Git提交日志规范</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/markdown/">Markdown</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/cicd/">CI/CD</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/mkdocs/">mkdocs简单使用</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitstudy/">Git的黑魔法</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">微服务</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../micro/spring-cloud/">基于SpringCloud的微服务架构演变史</a>
                </li>
                <li class="">
                    
    <a class="" href="../../micro/fbs-lock/">分布式锁</a>
                </li>
                <li class="">
                    
    <a class="" href="../../micro/design/">微服务设计</a>
                </li>
                <li class="">
                    
    <a class="" href="../../micro/distrimsg/">分布式系统与消息的投递</a>
                </li>
                <li class="">
                    
    <a class="" href="../../micro/ddd/">基于DDD的微服务设计和开发实战</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">经验分析</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../exp/devops/">DevOps</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/micro-service/">Micro-Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/raft-gossip/">Raft算法和Gossip协议</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/cl/">集群和负载均衡</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/ai/">人工智能</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/code-principle/">代码原则</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/techbig/">如何成为技术大牛</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/learnweetout/">程序员如何技术成长</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/pt/">产品与技术</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/four_deep_learning/">深度学习框架</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/tl/">在阿里做了5年技术Leader，我总结出这些套路！</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/cto/">CTO 技能图谱</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">医学</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../doctor/ae/">脑炎</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">构架</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../framework/split/">构架拆分</a>
                </li>
                <li class="">
                    
    <a class="" href="../../framework/fgb/">分布式、高并发、多线程</a>
                </li>
                <li class="">
                    
    <a class="" href="../../framework/agility/">如何理解敏捷开发</a>
                </li>
                <li class="">
                    
    <a class="" href="../../framework/fwork/">走向架构师必备的技能</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">情感</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../emotion/eq/">情商</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/workheard/">工作心得</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/lookbook/">看书</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/fmf/">4种男朋友</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/notheart/">不上心</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/selfdiscipline/">自律</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/notlike/">喜欢与不喜欢</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/latemarry/">晚婚</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/understand/">追女生要明白这些事</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/backup/">备胎</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/chase/">为什么追不到她</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/livefail/">为什么活着失败</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/emotion/">情绪管理</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/abolish/">废掉的三个迹象</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/uptime/">余生，好好珍惜</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/losecome/">所有的失去，都会以另一种方式归来</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/threeheart/">人生有这三种好心态</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/onelike/">一个感情真相</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/notruth/">情商与道理</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/smf/">六种男人远离</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/select/">决定接下来人生归属的，不是努力，而是选择</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/nolike/">被你拉黑的那个人，你一定很喜欢吧</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/onepath/">余生，学会一个人走，不管有没有人陪</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/twopath/">往后余生还很精彩，别被熬夜拖垮了</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/lifetime/">心态好的人，一辈子都好</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/hearttoheart/">将心比心，方得人心</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/ttt/">别睡太晚，别爱太满，别要太多</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/profess/">表白</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">BurningMyself</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Web &raquo;</li>
        
      
        
          <li>技术博文 &raquo;</li>
        
      
    
    <li>js 工具函数</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/burningmyself/burningmyself.github.io/edit/master/docs/web/js_tool_method.md"> Edit on burningmyself/blog</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="javascript">JavaScript 工具函数大全<a class="headerlink" href="#javascript" title="Permanent link">&para;</a></h1>
<h2 id="_1">数组<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<ol>
<li>all：布尔全等判断</li>
</ol>
<pre class="codehilite"><code class="language-js">const all = (arr, fn = Boolean) =&gt; arr.every(fn);

all([4, 2, 3], x =&gt; x &gt; 1); // true
all([1, 2, 3]); // true</code></pre>


<ol>
<li>allEqual：检查数组各项相等</li>
</ol>
<pre class="codehilite"><code class="language-js">const allEqual = arr =&gt; arr.every(val =&gt; val === arr[0]);

allEqual([1, 2, 3, 4, 5, 6]); // false
allEqual([1, 1, 1, 1]); // true</code></pre>


<ol>
<li>approximatelyEqual：约等于</li>
</ol>
<pre class="codehilite"><code class="language-js">const approximatelyEqual = (v1, v2, epsilon = 0.001) =&gt; Math.abs(v1 - v2) &lt; epsilon;

approximatelyEqual(Math.PI / 2.0, 1.5708); // true</code></pre>


<ol>
<li>arrayToCSV：数组转CSV格式（带空格的字符串）</li>
</ol>
<pre class="codehilite"><code class="language-js">const arrayToCSV = (arr, delimiter = ',') =&gt;
  arr.map(v =&gt; v.map(x =&gt; `&quot;${x}&quot;`).join(delimiter)).join('\n');

arrayToCSV([['a', 'b'], ['c', 'd']]); // '&quot;a&quot;,&quot;b&quot;\n&quot;c&quot;,&quot;d&quot;'
arrayToCSV([['a', 'b'], ['c', 'd']], ';'); // '&quot;a&quot;;&quot;b&quot;\n&quot;c&quot;;&quot;d&quot;'</code></pre>


<ol>
<li>arrayToHtmlList：数组转li列表</li>
</ol>
<pre class="codehilite"><code class="language-js">const arrayToHtmlList = (arr, listID) =&gt;
  (el =&gt; (
    (el = document.querySelector('#' + listID)),
    (el.innerHTML += arr.map(item =&gt; `&lt;li&gt;${item}&lt;/li&gt;`).join(''))
  ))();

arrayToHtmlList(['item 1', 'item 2'], 'myListID');</code></pre>


<ol>
<li>average：平均数</li>
</ol>
<pre class="codehilite"><code class="language-js">const average = (...nums) =&gt; nums.reduce((acc, val) =&gt; acc + val, 0) / nums.length;
average(...[1, 2, 3]); // 2
average(1, 2, 3); // 2</code></pre>


<ol>
<li>averageBy：数组对象属性平均数</li>
</ol>
<p>此代码段将获取数组对象属性的平均值</p>
<pre class="codehilite"><code class="language-js">const averageBy = (arr, fn) =&gt;
  arr.map(typeof fn === 'function' ? fn : val =&gt; val[fn]).reduce((acc, val) =&gt; acc + val, 0) /
  arr.length;

averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], o =&gt; o.n); // 5
averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], 'n'); // 5</code></pre>


<ol>
<li>bifurcate：拆分断言后的数组</li>
</ol>
<p>可以根据每个元素返回的值，使用reduce()和push() 将元素添加到第二次参数fn中 。</p>
<pre class="codehilite"><code class="language-js">const bifurcate = (arr, filter) =&gt;
  arr.reduce((acc, val, i) =&gt; (acc[filter[i] ? 0 : 1].push(val), acc), [[], []]);
bifurcate(['beep', 'boop', 'foo', 'bar'], [true, true, false, true]); 
// [ ['beep', 'boop', 'bar'], ['foo'] ]</code></pre>


<ol>
<li>castArray：其它类型转数组</li>
</ol>
<pre class="codehilite"><code class="language-js">const castArray = val =&gt; (Array.isArray(val) ? val : [val]);

castArray('foo'); // ['foo']
castArray([1]); // [1]
castArray(1); // [1]</code></pre>


<ol>
<li>compact：去除数组中的无效/无用值</li>
</ol>
<pre class="codehilite"><code class="language-js">const compact = arr =&gt; arr.filter(Boolean);

compact([0, 1, false, 2, '', 3, 'a', 'e' * 23, NaN, 's', 34]); 
// [ 1, 2, 3, 'a', 's', 34 ]</code></pre>


<ol>
<li>countOccurrences：检测数值出现次数</li>
</ol>
<pre class="codehilite"><code class="language-js">const countOccurrences = (arr, val) =&gt; arr.reduce((a, v) =&gt; (v === val ? a + 1 : a), 0);
countOccurrences([1, 1, 2, 1, 2, 3], 1); // 3</code></pre>


<ol>
<li>deepFlatten：递归扁平化数组</li>
</ol>
<pre class="codehilite"><code class="language-js">const deepFlatten = arr =&gt; [].concat(...arr.map(v =&gt; (Array.isArray(v) ? deepFlatten(v) : v)));

deepFlatten([1, [2], [[3], 4], 5]); // [1,2,3,4,5]</code></pre>


<ol>
<li>difference：寻找差异（并返回第一个数组独有的）</li>
</ol>
<p>此代码段查找两个数组之间的差异，并返回第一个数组独有的。</p>
<pre class="codehilite"><code class="language-js">const difference = (a, b) =&gt; {
  const s = new Set(b);
  return a.filter(x =&gt; !s.has(x));
};

difference([1, 2, 3], [1, 2, 4]); // [3]</code></pre>


<ol>
<li>differenceBy：先执行再寻找差异</li>
</ol>
<p>在将给定函数应用于两个列表的每个元素之后，此方法返回两个数组之间的差异。</p>
<pre class="codehilite"><code class="language-js">const differenceBy = (a, b, fn) =&gt; {
  const s = new Set(b.map(fn));
  return a.filter(x =&gt; !s.has(fn(x)));
};

differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor); // [1.2]
differenceBy([{ x: 2 }, { x: 1 }], [{ x: 1 }], v =&gt; v.x); // [ { x: 2 } ]</code></pre>


<ol>
<li>dropWhile：删除不符合条件的值</li>
</ol>
<p>此代码段从数组顶部开始删除元素，直到传递的函数返回为true。</p>
<pre class="codehilite"><code class="language-js">const dropWhile = (arr, func) =&gt; {
  while (arr.length &gt; 0 &amp;&amp; !func(arr[0])) arr = arr.slice(1);
  return arr;
};

dropWhile([1, 2, 3, 4], n =&gt; n &gt;= 3); // [3,4]</code></pre>


<ol>
<li>flatten：指定深度扁平化数组</li>
</ol>
<p>此代码段第二参数可指定深度。</p>
<pre class="codehilite"><code class="language-js">const flatten = (arr, depth = 1) =&gt;
  arr.reduce((a, v) =&gt; a.concat(depth &gt; 1 &amp;&amp; Array.isArray(v) ? flatten(v, depth - 1) : v), []);

flatten([1, [2], 3, 4]); // [1, 2, 3, 4]
flatten([1, [2, [3, [4, 5], 6], 7], 8], 2); // [1, 2, 3, [4, 5], 6, 7, 8]</code></pre>


<ol>
<li>indexOfAll：返回数组中某值的所有索引</li>
</ol>
<p>此代码段可用于获取数组中某个值的所有索引，如果此值中未包含该值，则返回一个空数组。</p>
<pre class="codehilite"><code class="language-js">const indexOfAll = (arr, val) =&gt; arr.reduce((acc, el, i) =&gt; (el === val ? [...acc, i] : acc), []);

indexOfAll([1, 2, 3, 1, 2, 3], 1); // [0,3]
indexOfAll([1, 2, 3], 4); // []</code></pre>


<ol>
<li>intersection：两数组的交集</li>
</ol>
<pre class="codehilite"><code class="language-js">const intersection = (a, b) =&gt; {
  const s = new Set(b);
  return a.filter(x =&gt; s.has(x));
};

intersection([1, 2, 3], [4, 3, 2]); // [2, 3]</code></pre>


<ol>
<li>intersectionWith：两数组都符合条件的交集</li>
</ol>
<p>此片段可用于在对两个数组的每个元素执行了函数之后，返回两个数组中存在的元素列表。</p>
<pre class="codehilite"><code class="language-js">const intersectionBy = (a, b, fn) =&gt; {
  const s = new Set(b.map(fn));
  return a.filter(x =&gt; s.has(fn(x)));
};

intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor); // [2.1]</code></pre>


<ol>
<li>intersectionWith：先比较后返回交集</li>
</ol>
<pre class="codehilite"><code class="language-js">const intersectionWith = (a, b, comp) =&gt; a.filter(x =&gt; b.findIndex(y =&gt; comp(x, y)) !== -1);

intersectionWith([1, 1.2, 1.5, 3, 0], [1.9, 3, 0, 3.9], (a, b) =&gt; Math.round(a) === Math.round(b)); // [1.5, 3, 0]</code></pre>


<ol>
<li>minN：返回指定长度的升序数组</li>
</ol>
<pre class="codehilite"><code class="language-js">const minN = (arr, n = 1) =&gt; [...arr].sort((a, b) =&gt; a - b).slice(0, n);

minN([1, 2, 3]); // [1]
minN([1, 2, 3], 2); // [1,2]</code></pre>


<ol>
<li>negate：根据条件反向筛选</li>
</ol>
<pre class="codehilite"><code class="language-js">const negate = func =&gt; (...args) =&gt; !func(...args);

[1, 2, 3, 4, 5, 6].filter(negate(n =&gt; n % 2 === 0)); // [ 1, 3, 5 ]</code></pre>


<ol>
<li>randomIntArrayInRange：生成两数之间指定长度的随机数组</li>
</ol>
<pre class="codehilite"><code class="language-js">const randomIntArrayInRange = (min, max, n = 1) =&gt;
  Array.from({ length: n }, () =&gt; Math.floor(Math.random() * (max - min + 1)) + min);

randomIntArrayInRange(12, 35, 10); // [ 34, 14, 27, 17, 30, 27, 20, 26, 21, 14 ]</code></pre>


<ol>
<li>sample：在指定数组中获取随机数</li>
</ol>
<pre class="codehilite"><code class="language-js">const sample = arr =&gt; arr[Math.floor(Math.random() * arr.length)];

sample([3, 7, 9, 11]); // 9</code></pre>


<ol>
<li>sampleSize：在指定数组中获取指定长度的随机数</li>
</ol>
<p>此代码段可用于从数组中获取指定长度的随机数，直至穷尽数组。 使用Fisher-Yates算法对数组中的元素进行随机选择。</p>
<pre class="codehilite"><code class="language-js">const sampleSize = ([...arr], n = 1) =&gt; {
  let m = arr.length;
  while (m) {
    const i = Math.floor(Math.random() * m--);
    [arr[m], arr[i]] = [arr[i], arr[m]];
  }
  return arr.slice(0, n);
};

sampleSize([1, 2, 3], 2); // [3,1]
sampleSize([1, 2, 3], 4); // [2,3,1]</code></pre>


<ol>
<li>shuffle：“洗牌” 数组</li>
</ol>
<p>此代码段使用Fisher-Yates算法随机排序数组的元素。</p>
<pre class="codehilite"><code class="language-js">const shuffle = ([...arr]) =&gt; {
  let m = arr.length;
  while (m) {
    const i = Math.floor(Math.random() * m--);
    [arr[m], arr[i]] = [arr[i], arr[m]];
  }
  return arr;
};

const foo = [1, 2, 3];
shuffle(foo); // [2, 3, 1], foo = [1, 2, 3]</code></pre>


<ol>
<li>nest：根据parent_id生成树结构（阿里一面真题）</li>
</ol>
<p>根据每项的parent_id，生成具体树形结构的对象。</p>
<pre class="codehilite"><code class="language-js">const nest = (items, id = null, link = 'parent_id') =&gt;
  items
    .filter(item =&gt; item[link] === id)
    .map(item =&gt; ({ ...item, children: nest(items, item.id) }));</code></pre>


<p>用法：</p>
<pre class="codehilite"><code class="language-js">  const comments = [
  { id: 1, parent_id: null },
  { id: 2, parent_id: 1 },
  { id: 3, parent_id: 1 },
  { id: 4, parent_id: 2 },
  { id: 5, parent_id: 4 }
];
const nestedComments = nest(comments); // [{ id: 1, parent_id: null, children: [...] }]</code></pre>


<h2 id="_2">函数<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<ol>
<li>attempt：捕获函数运行异常</li>
</ol>
<p>该代码段执行一个函数，返回结果或捕获的错误对象。</p>
<pre class="codehilite"><code class="language-js">onst attempt = (fn, ...args) =&gt; {
  try {
    return fn(...args);
  } catch (e) {
    return e instanceof Error ? e : new Error(e);
  }
};
var elements = attempt(function(selector) {
  return document.querySelectorAll(selector);
}, '&gt;_&gt;');
if (elements instanceof Error) elements = []; // elements = []</code></pre>


<ol>
<li>defer：推迟执行</li>
</ol>
<pre class="codehilite"><code class="language-js">const defer = (fn, ...args) =&gt; setTimeout(fn, 1, ...args);

defer(console.log, 'a'), console.log('b'); // logs 'b' then 'a'</code></pre>


<ol>
<li>runPromisesInSeries：运行多个Promises</li>
</ol>
<pre class="codehilite"><code class="language-js">const runPromisesInSeries = ps =&gt; ps.reduce((p, next) =&gt; p.then(next), Promise.resolve());
const delay = d =&gt; new Promise(r =&gt; setTimeout(r, d));

runPromisesInSeries([() =&gt; delay(1000), () =&gt; delay(2000)]);
//依次执行每个Promises ，总共需要3秒钟才能完成</code></pre>


<ol>
<li>timeTaken：计算函数执行时间</li>
</ol>
<pre class="codehilite"><code class="language-js">const timeTaken = callback =&gt; {
  console.time('timeTaken');
  const r = callback();
  console.timeEnd('timeTaken');
  return r;
};

timeTaken(() =&gt; Math.pow(2, 10)); // 1024, (logged): timeTaken: 0.02099609375ms</code></pre>


<ol>
<li>createEventHub：简单的发布/订阅模式</li>
</ol>
<p>创建一个发布/订阅（发布-订阅）事件集线，有emit，on和off方法。</p>
<ul>
<li>使用Object.create(null)创建一个空的hub对象。</li>
<li>emit，根据event参数解析处理程序数组，然后.forEach()通过传入数据作为参数来运行每个处理程序。</li>
<li>on，为事件创建一个数组（若不存在则为空数组），然后.push()将处理程序添加到该数组。</li>
<li>off，用.findIndex()在事件数组中查找处理程序的索引，并使用.splice()删除。</li>
</ul>
<pre class="codehilite"><code class="language-js">const createEventHub = () =&gt; ({
  hub: Object.create(null),
  emit(event, data) {
    (this.hub[event] || []).forEach(handler =&gt; handler(data));
  },
  on(event, handler) {
    if (!this.hub[event]) this.hub[event] = [];
    this.hub[event].push(handler);
  },
  off(event, handler) {
    const i = (this.hub[event] || []).findIndex(h =&gt; h === handler);
    if (i &gt; -1) this.hub[event].splice(i, 1);
    if (this.hub[event].length === 0) delete this.hub[event];
  }
});</code></pre>


<p>用法：</p>
<pre class="codehilite"><code class="language-js">const handler = data =&gt; console.log(data);
const hub = createEventHub();
let increment = 0;

// 订阅，监听不同事件
hub.on('message', handler);
hub.on('message', () =&gt; console.log('Message event fired'));
hub.on('increment', () =&gt; increment++);

// 发布：发出事件以调用所有订阅给它们的处理程序，并将数据作为参数传递给它们
hub.emit('message', 'hello world'); // 打印 'hello world' 和 'Message event fired'
hub.emit('message', { hello: 'world' }); // 打印 对象 和 'Message event fired'
hub.emit('increment'); // increment = 1

// 停止订阅
hub.off('message', handler);</code></pre>


<ol>
<li>memoize：缓存函数</li>
</ol>
<p>通过实例化一个Map对象来创建一个空的缓存。</p>
<p>通过检查输入值的函数输出是否已缓存，返回存储一个参数的函数，该参数将被提供给已记忆的函数；如果没有，则存储并返回它。</p>
<pre class="codehilite"><code class="language-js">const memoize = fn =&gt; {
  const cache = new Map();
  const cached = function(val) {
    return cache.has(val) ? cache.get(val) : cache.set(val, fn.call(this, val)) &amp;&amp; cache.get(val);
  };
  cached.cache = cache;
  return cached;
};</code></pre>


<p>Ps: 这个版本可能不是很清晰，还有Vue源码版的：</p>
<pre class="codehilite"><code class="language-js">/**
 * Create a cached version of a pure function.
 */
export function cached&lt;F: Function&gt; (fn: F): F {
  const cache = Object.create(null)
  return (function cachedFn (str: string) {
    const hit = cache[str]
    return hit || (cache[str] = fn(str))
  }: any)
}</code></pre>


<ol>
<li>once：只调用一次的函数</li>
</ol>
<pre class="codehilite"><code class="language-js">const once = fn =&gt; {
  let called = false
  return function () {
    if (!called) {
      called = true
      fn.apply(this, arguments)
    }
  }
};</code></pre>


<ol>
<li>flattenObject：以键的路径扁平化对象</li>
</ol>
<p>使用递归。</p>
<ul>
<li>利用Object.keys(obj)联合Array.prototype.reduce()，以每片叶子节点转换为扁平的路径节点。</li>
<li>如果键的值是一个对象，则函数使用调用适当的自身prefix以创建路径Object.assign()。</li>
<li>否则，它将适当的前缀键值对添加到累加器对象。</li>
<li>prefix除非您希望每个键都有一个前缀，否则应始终省略第二个参数。</li>
</ul>
<pre class="codehilite"><code class="language-js">const flattenObject = (obj, prefix = '') =&gt;
  Object.keys(obj).reduce((acc, k) =&gt; {
    const pre = prefix.length ? prefix + '.' : '';
    if (typeof obj[k] === 'object') Object.assign(acc, flattenObject(obj[k], pre + k));
    else acc[pre + k] = obj[k];
    return acc;
  }, {});

flattenObject({ a: { b: { c: 1 } }, d: 1 }); // { 'a.b.c': 1, d: 1 }</code></pre>


<ol>
<li>unflattenObject：以键的路径展开对象</li>
</ol>
<p>与上面的相反，展开对象。</p>
<pre class="codehilite"><code class="language-js">const unflattenObject = obj =&gt;
  Object.keys(obj).reduce((acc, k) =&gt; {
    if (k.indexOf('.') !== -1) {
      const keys = k.split('.');
      Object.assign(
        acc,
        JSON.parse(
          '{' +
            keys.map((v, i) =&gt; (i !== keys.length - 1 ? `&quot;${v}&quot;:{` : `&quot;${v}&quot;:`)).join('') +
            obj[k] +
            '}'.repeat(keys.length)
        )
      );
    } else acc[k] = obj[k];
    return acc;
  }, {});

unflattenObject({ 'a.b.c': 1, d: 1 }); // { a: { b: { c: 1 } }, d: 1 }</code></pre>


<p>这个的用途，在做Tree组件或复杂表单时取值非常舒服。</p>
<h2 id="_3">字符串<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<ol>
<li>byteSize：返回字符串的字节长度</li>
</ol>
<pre class="codehilite"><code class="language-js">const byteSize = str =&gt; new Blob([str]).size;

byteSize('😀'); // 4
byteSize('Hello World'); // 11</code></pre>


<ol>
<li>capitalize：首字母大写</li>
</ol>
<pre class="codehilite"><code class="language-js">const capitalize = ([first, ...rest]) =&gt;
  first.toUpperCase() + rest.join('');

capitalize('fooBar'); // 'FooBar'
capitalize('fooBar', true); // 'Foobar'</code></pre>


<ol>
<li>capitalizeEveryWord：每个单词首字母大写</li>
</ol>
<pre class="codehilite"><code class="language-js">const capitalizeEveryWord = str =&gt; str.replace(/\b[a-z]/g, char =&gt; char.toUpperCase());

capitalizeEveryWord('hello world!'); // 'Hello World!'</code></pre>


<ol>
<li>decapitalize：首字母小写</li>
</ol>
<pre class="codehilite"><code class="language-js">const decapitalize = ([first, ...rest]) =&gt;
  first.toLowerCase() + rest.join('')

decapitalize('FooBar'); // 'fooBar'
decapitalize('FooBar'); // 'fooBar'</code></pre>


<ol>
<li>luhnCheck：银行卡号码校验（luhn算法）</li>
</ol>
<p>Luhn算法的实现，用于验证各种标识号，例如信用卡号，IMEI号，国家提供商标识号等。</p>
<p>与String.prototype.split('')结合使用，以获取数字数组。获得最后一个数字。实施luhn算法。如果被整除，则返回，否则返回。</p>
<pre class="codehilite"><code class="language-js">const luhnCheck = num =&gt; {
  let arr = (num + '')
    .split('')
    .reverse()
    .map(x =&gt; parseInt(x));
  let lastDigit = arr.splice(0, 1)[0];
  let sum = arr.reduce((acc, val, i) =&gt; (i % 2 !== 0 ? acc + val : acc + ((val * 2) % 9) || 9), 0);
  sum += lastDigit;
  return sum % 10 === 0;
};</code></pre>


<p>用例:</p>
<pre class="codehilite"><code class="language-js">luhnCheck('4485275742308327'); // true
luhnCheck(6011329933655299); //  false
luhnCheck(123456789); // false</code></pre>


<p>补充：银行卡号码的校验规则：</p>
<p>银行卡号码的校验采用Luhn算法，校验过程大致如下：</p>
<ul>
<li>从右到左给卡号字符串编号，最右边第一位是1，最右边第二位是2，最右边第三位是3….</li>
<li>从右向左遍历，对每一位字符t执行第三个步骤，并将每一位的计算结果相加得到一个数s。</li>
<li>对每一位的计算规则：如果这一位是奇数位，则返回t本身，如果是偶数位，则先将t乘以2得到一个数n，如果n是一位数（小于10），直接返回n，否则将n的个位数和十位数相加返回。</li>
<li>如果s能够整除10，则此号码有效，否则号码无效。</li>
</ul>
<p>因为最终的结果会对10取余来判断是否能够整除10，所以又叫做模10算法。
当然，还是库比较香: bankcardinfo</p>
<ol>
<li>splitLines：将多行字符串拆分为行数组。</li>
</ol>
<p>使用String.prototype.split()和正则表达式匹配换行符并创建一个数组。</p>
<pre class="codehilite"><code class="language-js">const splitLines = str =&gt; str.split(/\r?\n/);

splitLines('This\nis a\nmultiline\nstring.\n'); // ['This', 'is a', 'multiline', 'string.' , '']</code></pre>


<ol>
<li>stripHTMLTags：删除字符串中的HTMl标签</li>
</ol>
<p>从字符串中删除HTML / XML标签。</p>
<p>使用正则表达式从字符串中删除HTML / XML 标记。</p>
<pre class="codehilite"><code class="language-js">const stripHTMLTags = str =&gt; str.replace(/&lt;[^&gt;]*&gt;/g, '');

stripHTMLTags('&lt;p&gt;&lt;em&gt;lorem&lt;/em&gt; &lt;strong&gt;ipsum&lt;/strong&gt;&lt;/p&gt;'); // 'lorem ipsum'</code></pre>


<h2 id="_4">对象<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<ol>
<li>dayOfYear：当前日期天数</li>
</ol>
<pre class="codehilite"><code class="language-js">const dayOfYear = date =&gt;
  Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);

dayOfYear(new Date()); // 285</code></pre>


<ol>
<li>forOwn：迭代属性并执行回调</li>
</ol>
<pre class="codehilite"><code class="language-js">const forOwn = (obj, fn) =&gt; Object.keys(obj).forEach(key =&gt; fn(obj[key], key, obj));
forOwn({ foo: 'bar', a: 1 }, v =&gt; console.log(v)); // 'bar', 1</code></pre>


<ol>
<li>Get Time From Date：返回当前24小时制时间的字符串</li>
</ol>
<pre class="codehilite"><code class="language-js">const getColonTimeFromDate = date =&gt; date.toTimeString().slice(0, 8);

getColonTimeFromDate(new Date()); // &quot;08:38:00&quot;</code></pre>


<ol>
<li>Get Days Between Dates：返回日期间的天数</li>
</ol>
<pre class="codehilite"><code class="language-js">const getDaysDiffBetweenDates = (dateInitial, dateFinal) =&gt;
  (dateFinal - dateInitial) / (1000 * 3600 * 24);

getDaysDiffBetweenDates(new Date('2019-01-01'), new Date('2019-10-14')); // 286</code></pre>


<ol>
<li>is：检查值是否为特定类型。</li>
</ol>
<pre class="codehilite"><code class="language-js">const is = (type, val) =&gt; ![, null].includes(val) &amp;&amp; val.constructor === type;

is(Array, [1]); // true
is(ArrayBuffer, new ArrayBuffer()); // true
is(Map, new Map()); // true
is(RegExp, /./g); // true
is(Set, new Set()); // true
is(WeakMap, new WeakMap()); // true
is(WeakSet, new WeakSet()); // true
is(String, ''); // true
is(String, new String('')); // true
is(Number, 1); // true
is(Number, new Number(1)); // true
is(Boolean, true); // true
is(Boolean, new Boolean(true)); // true</code></pre>


<ol>
<li>isAfterDate：检查是否在某日期后</li>
</ol>
<pre class="codehilite"><code class="language-js">const isAfterDate = (dateA, dateB) =&gt; dateA &gt; dateB;

isAfterDate(new Date(2010, 10, 21), new Date(2010, 10, 20)); // true</code></pre>


<ol>
<li>isBeforeDate：检查是否在某日期前</li>
</ol>
<pre class="codehilite"><code class="language-js">const isBeforeDate = (dateA, dateB) =&gt; dateA &lt; dateB;

isBeforeDate(new Date(2010, 10, 20), new Date(2010, 10, 21)); // true</code></pre>


<ol>
<li>tomorrow：获取明天的字符串格式时间</li>
</ol>
<pre class="codehilite"><code class="language-js">const tomorrow = () =&gt; {
  let t = new Date();
  t.setDate(t.getDate() + 1);
  return t.toISOString().split('T')[0];
};

tomorrow(); // 2019-10-15 (如果明天是2019-10-15)</code></pre>


<ol>
<li>equals：全等判断</li>
</ol>
<p>在两个变量之间进行深度比较以确定它们是否全等。</p>
<p>此代码段精简的核心在于Array.prototype.every()的使用。</p>
<pre class="codehilite"><code class="language-js">const equals = (a, b) =&gt; {
  if (a === b) return true;
  if (a instanceof Date &amp;&amp; b instanceof Date) return a.getTime() === b.getTime();
  if (!a || !b || (typeof a !== 'object' &amp;&amp; typeof b !== 'object')) return a === b;
  if (a.prototype !== b.prototype) return false;
  let keys = Object.keys(a);
  if (keys.length !== Object.keys(b).length) return false;
  return keys.every(k =&gt; equals(a[k], b[k]));
};</code></pre>


<p>用法：</p>
<pre class="codehilite"><code class="language-js">equals({ a: [2, { e: 3 }], b: [4], c: 'foo' }, { a: [2, { e: 3 }], b: [4], c: 'foo' }); // true</code></pre>


<h2 id="_5">数字<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<ol>
<li>randomIntegerInRange：生成指定范围的随机整数</li>
</ol>
<pre class="codehilite"><code class="language-js">const randomIntegerInRange = (min, max) =&gt; Math.floor(Math.random() * (max - min + 1)) + min;

randomIntegerInRange(0, 5); // 3</code></pre>


<ol>
<li>randomNumberInRange：生成指定范围的随机小数</li>
</ol>
<pre class="codehilite"><code class="language-js">const randomNumberInRange = (min, max) =&gt; Math.random() * (max - min) + min;

randomNumberInRange(2, 10); // 6.0211363285087005</code></pre>


<ol>
<li>round：四舍五入到指定位数</li>
</ol>
<pre class="codehilite"><code class="language-js">const round = (n, decimals = 0) =&gt; Number(`${Math.round(`${n}e${decimals}`)}e-${decimals}`);

round(1.005, 2); // 1.01</code></pre>


<ol>
<li>sum：计算数组或多个数字的总和</li>
</ol>
<pre class="codehilite"><code class="language-js">const sum = (...arr) =&gt; [...arr].reduce((acc, val) =&gt; acc + val, 0);

sum(1, 2, 3, 4); // 10
sum(...[1, 2, 3, 4]); // 10</code></pre>


<ol>
<li>toCurrency：简单的货币单位转换</li>
</ol>
<pre class="codehilite"><code class="language-js">const toCurrency = (n, curr, LanguageFormat = undefined) =&gt;
  Intl.NumberFormat(LanguageFormat, { style: 'currency', currency: curr }).format(n);

toCurrency(123456.789, 'EUR'); // €123,456.79
toCurrency(123456.789, 'USD', 'en-us'); // $123,456.79  
toCurrency(123456.789, 'USD', 'fa'); // ۱۲۳٬۴۵۶٫۷۹
toCurrency(322342436423.2435, 'JPY'); // ¥322,342,436,423 </code></pre>


<h2 id="_6">浏览器操作及其它<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<ol>
<li>bottomVisible：检查页面底部是否可见</li>
</ol>
<pre class="codehilite"><code class="language-js">const bottomVisible = () =&gt;
  document.documentElement.clientHeight + window.scrollY &gt;=
  (document.documentElement.scrollHeight || document.documentElement.clientHeight);

bottomVisible(); // true</code></pre>


<ol>
<li>Create Directory：检查创建目录</li>
</ol>
<p>此代码段调用fs模块的existsSync()检查目录是否存在，如果不存在，则mkdirSync()创建该目录。</p>
<pre class="codehilite"><code class="language-js">const fs = require('fs');
const createDirIfNotExists = dir =&gt; (!fs.existsSync(dir) ? fs.mkdirSync(dir) : undefined);
createDirIfNotExists('test'); </code></pre>


<ol>
<li>currentURL：返回当前链接url</li>
</ol>
<pre class="codehilite"><code class="language-js">const currentURL = () =&gt; window.location.href;

currentURL(); // 'https://juejin.im'</code></pre>


<ol>
<li>distance：返回两点间的距离</li>
</ol>
<p>该代码段通过计算欧几里得距离来返回两点之间的距离。</p>
<pre class="codehilite"><code class="language-js">const distance = (x0, y0, x1, y1) =&gt; Math.hypot(x1 - x0, y1 - y0);

distance(1, 1, 2, 3); // 2.23606797749979</code></pre>


<ol>
<li>elementContains：检查是否包含子元素
此代码段检查父元素是否包含子元素。</li>
</ol>
<pre class="codehilite"><code class="language-js">const elementContains = (parent, child) =&gt; parent !== child &amp;&amp; parent.contains(child);

elementContains(document.querySelector('head'), document.querySelector('title')); // true
elementContains(document.querySelector('body'), document.querySelector('body')); // false</code></pre>


<ol>
<li>getStyle：返回指定元素的生效样式</li>
</ol>
<pre class="codehilite"><code class="language-js">const getStyle = (el, ruleName) =&gt; getComputedStyle(el)[ruleName];

getStyle(document.querySelector('p'), 'font-size'); // '16px'</code></pre>


<ol>
<li>getType：返回值或变量的类型名</li>
</ol>
<pre class="codehilite"><code class="language-js">const getType = v =&gt;
  v === undefined ? 'undefined' : v === null ? 'null' : v.constructor.name.toLowerCase();

getType(new Set([1, 2, 3])); // 'set'
getType([1, 2, 3]); // 'array'</code></pre>


<ol>
<li>hasClass：校验指定元素的类名</li>
</ol>
<pre class="codehilite"><code class="language-js">const hasClass = (el, className) =&gt; el.classList.contains(className);
hasClass(document.querySelector('p.special'), 'special'); // true</code></pre>


<ol>
<li>hide：隐藏所有的指定标签</li>
</ol>
<pre class="codehilite"><code class="language-js">const hide = (...el) =&gt; [...el].forEach(e =&gt; (e.style.display = 'none'));

hide(document.querySelectorAll('img')); // 隐藏所有&lt;img&gt;标签</code></pre>


<ol>
<li>httpsRedirect：HTTP 跳转 HTTPS</li>
</ol>
<pre class="codehilite"><code class="language-js">const httpsRedirect = () =&gt; {
  if (location.protocol !== 'https:') location.replace('https://' + location.href.split('//')[1]);
};

httpsRedirect(); // 若在`http://www.baidu.com`, 则跳转到`https://www.baidu.com`</code></pre>


<ol>
<li>insertAfter：在指定元素之后插入新元素</li>
</ol>
<pre class="codehilite"><code class="language-js">const insertAfter = (el, htmlString) =&gt; el.insertAdjacentHTML('afterend', htmlString);

// &lt;div id=&quot;myId&quot;&gt;...&lt;/div&gt; &lt;p&gt;after&lt;/p&gt;
insertAfter(document.getElementById('myId'), '&lt;p&gt;after&lt;/p&gt;'); </code></pre>


<ol>
<li>insertBefore：在指定元素之前插入新元素</li>
</ol>
<pre class="codehilite"><code class="language-js">const insertBefore = (el, htmlString) =&gt; el.insertAdjacentHTML('beforebegin', htmlString);

insertBefore(document.getElementById('myId'), '&lt;p&gt;before&lt;/p&gt;'); // &lt;p&gt;before&lt;/p&gt; &lt;div id=&quot;myId&quot;&gt;...&lt;/div&gt;</code></pre>


<ol>
<li>isBrowser：检查是否为浏览器环境</li>
</ol>
<p>此代码段可用于确定当前运行时环境是否为浏览器。这有助于避免在服务器（节点）上运行前端模块时出错。</p>
<pre class="codehilite"><code class="language-js">const isBrowser = () =&gt; ![typeof window, typeof document].includes('undefined');

isBrowser(); // true (browser)
isBrowser(); // false (Node)</code></pre>


<ol>
<li>isBrowserTab：检查当前标签页是否活动</li>
</ol>
<pre class="codehilite"><code class="language-js">const isBrowserTabFocused = () =&gt; !document.hidden;

isBrowserTabFocused(); // true</code></pre>


<ol>
<li>nodeListToArray：转换nodeList为数组</li>
</ol>
<pre class="codehilite"><code class="language-js">const nodeListToArray = nodeList =&gt; [...nodeList];

nodeListToArray(document.childNodes); // [ &lt;!DOCTYPE html&gt;, html ]</code></pre>


<ol>
<li>Random Hexadecimal Color Code：随机十六进制颜色</li>
</ol>
<pre class="codehilite"><code class="language-js">const randomHexColorCode = () =&gt; {
  let n = (Math.random() * 0xfffff * 1000000).toString(16);
  return '#' + n.slice(0, 6);
};

randomHexColorCode(); // &quot;#e34155&quot;</code></pre>


<ol>
<li>scrollToTop：平滑滚动至顶部</li>
</ol>
<pre class="codehilite"><code class="language-js">const scrollToTop = () =&gt; {
  const c = document.documentElement.scrollTop || document.body.scrollTop;
  if (c &gt; 0) {
    window.requestAnimationFrame(scrollToTop);
    window.scrollTo(0, c - c / 8);
  }
};

scrollToTop();</code></pre>


<ol>
<li>smoothScroll：滚动到指定元素区域</li>
</ol>
<p>该代码段可将指定元素平滑滚动到浏览器窗口的可见区域。</p>
<pre class="codehilite"><code class="language-js">const smoothScroll = element =&gt;
  document.querySelector(element).scrollIntoView({
    behavior: 'smooth'
  });

smoothScroll('#fooBar'); 
smoothScroll('.fooBar'); </code></pre>


<ol>
<li>detectDeviceType：检测移动/PC设备</li>
</ol>
<pre class="codehilite"><code class="language-js">const detectDeviceType = () =&gt;
  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
    ? 'Mobile'
    : 'Desktop';</code></pre>


<ol>
<li>getScrollPosition：返回当前的滚动位置</li>
</ol>
<p>默认参数为window ，pageXOffset(pageYOffset)为第一选择，没有则用scrollLeft(scrollTop)</p>
<pre class="codehilite"><code class="language-js">const getScrollPosition = (el = window) =&gt; ({
  x: el.pageXOffset !== undefined ? el.pageXOffset : el.scrollLeft,
  y: el.pageYOffset !== undefined ? el.pageYOffset : el.scrollTop
});

getScrollPosition(); // {x: 0, y: 200}</code></pre>


<ol>
<li>size：获取不同类型变量的字节长度</li>
</ol>
<p>这个的实现非常巧妙，利用Blob类文件对象的特性，获取对象的长度。</p>
<p>另外，多重三元运算符，是真香。</p>
<pre class="codehilite"><code class="language-js">const size = val =&gt;
  Array.isArray(val)
    ? val.length
    : val &amp;&amp; typeof val === 'object'
    ? val.size || val.length || Object.keys(val).length
    : typeof val === 'string'
    ? new Blob([val]).size
    : 0;

size([1, 2, 3, 4, 5]); // 5
size('size'); // 4
size({ one: 1, two: 2, three: 3 }); // 3</code></pre>


<ol>
<li>escapeHTML：转义HTML</li>
</ol>
<p>当然是用来防XSS攻击啦。</p>
<pre class="codehilite"><code class="language-js">const escapeHTML = str =&gt;
  str.replace(
    /[&amp;&lt;&gt;'&quot;]/g,
    tag =&gt;
      ({
        '&amp;': '&amp;amp;',
        '&lt;': '&amp;lt;',
        '&gt;': '&amp;gt;',
        &quot;'&quot;: '&amp;#39;',
        '&quot;': '&amp;quot;'
      }[tag] || tag)
  );

escapeHTML('&lt;a href=&quot;#&quot;&gt;Me &amp; you&lt;/a&gt;'); // '&amp;lt;a href=&amp;quot;#&amp;quot;&amp;gt;Me &amp;amp; you&amp;lt;/a&amp;gt;'</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../vue_cp_react/" class="btn btn-neutral float-right" title="vue与react比较">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../react_interview/" class="btn btn-neutral" title="React 面试"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../react_interview/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../vue_cp_react/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
