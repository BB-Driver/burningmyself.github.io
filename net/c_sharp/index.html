<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="朽木自雕">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>C# 6 - BurningMyself</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "C# 6";
    var mkdocs_page_input_path = "net\\c_sharp.md";
    var mkdocs_page_url = "/net/c_sharp/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> BurningMyself</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">介绍</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">技术博文</span>
    <ul class="subnav">
                <li class=" current">
                    
    <span class="caption-text">.NET</span>
    <ul class="subnav">
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">C# 6</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#c-6">一小时学会C# 6</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#string-interpolation">一、字符串插值 （String Interpolation）</a></li>
        
            <li><a class="toctree-l5" href="#_1">二、空操作符 ( ?. )</a></li>
        
            <li><a class="toctree-l5" href="#nameof">三、 NameOf</a></li>
        
            <li><a class="toctree-l5" href="#catchfinallyawait">四、在Catch和Finally里使用Await</a></li>
        
            <li><a class="toctree-l5" href="#_2">五、表达式方法体</a></li>
        
            <li><a class="toctree-l5" href="#_3">六、自动属性初始化器</a></li>
        
            <li><a class="toctree-l5" href="#_4">七、只读自动属性</a></li>
        
            <li><a class="toctree-l5" href="#exception-filter">八、异常过滤器 Exception Filter</a></li>
        
            <li><a class="toctree-l5" href="#index">九、 Index 初始化器</a></li>
        
            <li><a class="toctree-l5" href="#using-static-using">十、using 静态类的方法可以使用 static using</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../c_docker/">.Ner Core Docker 部署</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../c_mysql_nginx/">使用 Docker 容器化部署 ASP.NET Core + MySQL + Nginx</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../c_core_safety/">让你的ASP.NET Core应用程序更安全</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../c_core_study_route/">ASP.NET Core开发者指南</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Java</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../java/feature/">Java特性</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/load-class/">Java类加载</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/orm/">Orm的优缺点</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/bio-nio/">BIO与NIO</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/rocketmq/rmq-1/">RocketMq下载与安装</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../java/springAnnotation/">Spring常用注解</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Python</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../python/feature/">Python特性</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../python/str_joint/">Python字符拼接</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../python/syntax_rule/">Python语法技巧</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../python/fabric/">远程部署神器 Fabric</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">PHP</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../php/kj/">框架</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Web</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../web/es6/">es6语法</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../web/ali_js_style/">阿里js样式规范</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../web/node.js/">node.js文档</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../web/react/">React 开发者指南</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../dart/syntax/">Dart语法学习</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../web/react_interview/">React 面试</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../web/js_tool_method/">js 工具函数</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../web/vue_cp_react/">vue与react比较</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">SQL</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_yh/">MySQL优化</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_yh17/">MySQL优化</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_log/">MySQL日志</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_index/">MySQL索引</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_pxc/">MySQL PXC集群</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mysql_use/">MySQL 数据库应用</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/sql_server_master/">Sql Server 主从备份</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/data_split/">数据库之互联网常用分库分表方案</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../sql/mybatis/">Mybatis使用心德</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Linux</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../linux/often/">常用命令</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../linux/ope/">实用的Linux 命令</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Docker</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../docker/docker/">Docker全科</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../docker/docker-compose/">docker和docker-compose 配置 mysql mongodb redis nginx jenkins 环境</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../docker/docker-jenkins/">Docker部署Jenkins</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Tool</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/git/">Git</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitquestion/">Git问题处理</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitflow/">GitFlow</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitbook/">GitBook</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitcmr/">Git提交日志规范</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/markdown/">Markdown</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/cicd/">CI/CD</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/mkdocs/">mkdocs简单使用</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tool/gitstudy/">Git的黑魔法</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">微服务</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../micro/spring-cloud/">基于SpringCloud的微服务架构演变史</a>
                </li>
                <li class="">
                    
    <a class="" href="../../micro/fbs-lock/">分布式锁</a>
                </li>
                <li class="">
                    
    <a class="" href="../../micro/design/">微服务设计</a>
                </li>
                <li class="">
                    
    <a class="" href="../../micro/distrimsg/">分布式系统与消息的投递</a>
                </li>
                <li class="">
                    
    <a class="" href="../../micro/ddd/">基于DDD的微服务设计和开发实战</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">经验分析</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../exp/devops/">DevOps</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/micro-service/">Micro-Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/raft-gossip/">Raft算法和Gossip协议</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/cl/">集群和负载均衡</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/ai/">人工智能</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/code-principle/">代码原则</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/techbig/">如何成为技术大牛</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/learnweetout/">程序员如何技术成长</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/pt/">产品与技术</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/four_deep_learning/">深度学习框架</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/tl/">在阿里做了5年技术Leader，我总结出这些套路！</a>
                </li>
                <li class="">
                    
    <a class="" href="../../exp/cto/">CTO 技能图谱</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">医学</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../doctor/ae/">脑炎</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">构架</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../framework/split/">构架拆分</a>
                </li>
                <li class="">
                    
    <a class="" href="../../framework/fgb/">分布式、高并发、多线程</a>
                </li>
                <li class="">
                    
    <a class="" href="../../framework/agility/">如何理解敏捷开发</a>
                </li>
                <li class="">
                    
    <a class="" href="../../framework/fwork/">走向架构师必备的技能</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">情感</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../emotion/eq/">情商</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/workheard/">工作心得</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/lookbook/">看书</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/fmf/">4种男朋友</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/notheart/">不上心</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/selfdiscipline/">自律</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/notlike/">喜欢与不喜欢</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/latemarry/">晚婚</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/understand/">追女生要明白这些事</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/backup/">备胎</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/chase/">为什么追不到她</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/livefail/">为什么活着失败</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/emotion/">情绪管理</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/abolish/">废掉的三个迹象</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/uptime/">余生，好好珍惜</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/losecome/">所有的失去，都会以另一种方式归来</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/threeheart/">人生有这三种好心态</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/onelike/">一个感情真相</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/notruth/">情商与道理</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/smf/">六种男人远离</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/select/">决定接下来人生归属的，不是努力，而是选择</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/nolike/">被你拉黑的那个人，你一定很喜欢吧</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/onepath/">余生，学会一个人走，不管有没有人陪</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/twopath/">往后余生还很精彩，别被熬夜拖垮了</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/lifetime/">心态好的人，一辈子都好</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/hearttoheart/">将心比心，方得人心</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/ttt/">别睡太晚，别爱太满，别要太多</a>
                </li>
                <li class="">
                    
    <a class="" href="../../emotion/profess/">表白</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">BurningMyself</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>.NET &raquo;</li>
        
      
        
          <li>技术博文 &raquo;</li>
        
      
    
    <li>C# 6</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/burningmyself/burningmyself.github.io/edit/master/docs/net/c_sharp.md"> Edit on burningmyself/blog</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="c-6">一小时学会C# 6<a class="headerlink" href="#c-6" title="Permanent link">&para;</a></h1>
<h2 id="string-interpolation">一、字符串插值 （String Interpolation）<a class="headerlink" href="#string-interpolation" title="Permanent link">&para;</a></h2>
<p>C# 6之前我们拼接字符串时需要这样</p>
<pre class="codehilite"><code class="language-C#"> var Name = &quot;Jack&quot;;
 var results = &quot;Hello&quot; + Name;</code></pre>


<p>或者</p>
<pre class="codehilite"><code class="language-C#"> var Name = &quot;Jack&quot;;
 var results = string.Format(&quot;Hello {0}&quot;, Name);</code></pre>


<p>但是C#6里我们就可以使用新的字符串插值特性</p>
<pre class="codehilite"><code class="language-C#">  var Name = &quot;Jack&quot;;
  var results = $&quot;Hello {Name}&quot;;</code></pre>


<p>上面只是一个简单的例子，想想如果有多个值要替换的话，用C#6的这个新特性，代码就会大大减小，而且可读性比起之前大大增强</p>
<pre class="codehilite"><code class="language-C#"> Person p = new Person {FirstName = &quot;Jack&quot;, LastName = &quot;Wang&quot;, Age = 100};
 var results = string.Format(&quot;First Name: {0} LastName: {1} Age: { 2} &quot;, p.FirstName, p.LastName, p.Age);</code></pre>


<p>有了字符串插值后:</p>
<pre class="codehilite"><code class="language-C#"> var results = $&quot;First Name: {p.FirstName} LastName: {p.LastName} Age: {p.Age}&quot;;</code></pre>


<p>字符串插值不光是可以插简单的字符串，还可以直接插入代码</p>
<pre class="codehilite"><code class="language-C#">Console.WriteLine($&quot;Jack is saying { new Tools().SayHello() }&quot;);

var info = $&quot;Your discount is {await GetDiscount()}&quot;;</code></pre>


<p>那么如何处理多语言呢？我们可以使用 IFormattable下面的代码如何实现多语言？</p>
<pre class="codehilite"><code class="language-C#"> Double remain = 2000.5; 
 var results= $&quot;your money is {remain:C}&quot;;  </code></pre>


<p>输出 your money is $2,000.50</p>
<p>使用IFormattable 多语言</p>
<pre class="codehilite"><code class="language-C#">class Program
{
    static void Main(string[] args)
    {

        Double remain = 2000.5; 

       var results= ChineseText($&quot;your money is {remain:C}&quot;);

        Console.WriteLine(results);
        Console.Read();
    }

    public static string ChineseText(IFormattable formattable)
    {
        return formattable.ToString(null, new CultureInfo(&quot;zh-cn&quot;));
    }
}</code></pre>


<p>输出  your money is ￥2,000.50</p>
<h2 id="_1">二、空操作符 ( ?. )<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>C# 6添加了一个 ?. 操作符，当一个对象或者属性职为空时直接返回null, 就不再继续执行后面的代码，在之前我们的代码里经常出现 NullException, 所以我们就需要加很多Null的判断，比如</p>
<pre class="codehilite"><code class="language-C#"> if (user != null &amp;&amp; user.Project != null &amp;&amp; user.Project.Tasks != null &amp;&amp; user.Project.Tasks.Count &gt; 0)
 {
   Console.WriteLine(user.Project.Tasks.First().Name);
 }</code></pre>


<p>现在我们可以不用写 IF 直接写成如下这样</p>
<pre class="codehilite"><code class="language-C#">Console.WriteLine(user?.Project?.Tasks?.First()?.Name);</code></pre>


<p>这个?. 特性不光是可以用于取值，也可以用于方法调用，如果对象为空将不进行任何操作，下面的代码不会报错，也不会有任何输出。</p>
<pre class="codehilite"><code class="language-C#">class Program
{
    static void Main(string[] args)
    {
        User user = null;
        user?.SayHello();
        Console.Read();
    }
}

public class User
{
    public void SayHello()
    {
        Console.WriteLine(&quot;Ha Ha&quot;);
    }
}</code></pre>


<p>还可以用于数组的索引器</p>
<pre class="codehilite"><code class="language-C#">class Program
{
    static void Main(string[] args)
    {
        User[] users = null;

        List&lt;User&gt; listUsers = null;

        // Console.WriteLine(users[1]?.Name); // 报错
        // Console.WriteLine(listUsers[1]?.Name); //报错

        Console.WriteLine(users?[1].Name); // 正常
        Console.WriteLine(listUsers?[1].Name); // 正常

        Console.ReadLine();
    }
}</code></pre>


<p>注意： 上面的代码虽然可以让我们少些很多代码，而且也减少了空异常，但是我们却需要小心使用，因为有的时候我们确实是需要抛出空异常，那么使用这个特性反而隐藏了Bug</p>
<h2 id="nameof">三、 NameOf<a class="headerlink" href="#nameof" title="Permanent link">&para;</a></h2>
<p>过去，我们有很多的地方需要些硬字符串，导致重构比较困难，而且一旦敲错字母很难察觉出来，比如</p>
<pre class="codehilite"><code class="language-C#">if (role == &quot;admin&quot;)
{
}</code></pre>


<p>WPF 也经常有这样的代码</p>
<pre class="codehilite"><code class="language-C#">public string Name
{
  get { return name; }
  set
  {
      name= value;
      RaisePropertyChanged(&quot;Name&quot;);
  }
}</code></pre>


<p>现在有了C#6 NameOf后，我们可以这样</p>
<pre class="codehilite"><code class="language-C#">public string Name
{
  get { return name; }
  set
  {
      name= value;
      RaisePropertyChanged(NameOf(Name));
  }
}
static void Main(string[] args)
{
    Console.WriteLine(nameof(User.Name)); //  output: Name
    Console.WriteLine(nameof(System.Linq)); // output: Linq
    Console.WriteLine(nameof(List&lt;User&gt;)); // output: List
    Console.ReadLine();
}</code></pre>


<p>注意： NameOf只会返回Member的字符串，如果前面有对象或者命名空间，NameOf只会返回 . 的最后一部分, 另外NameOf有很多情况是不支持的，比如方法，关键字，对象的实例以及字符串和表达式</p>
<h2 id="catchfinallyawait">四、在Catch和Finally里使用Await<a class="headerlink" href="#catchfinallyawait" title="Permanent link">&para;</a></h2>
<p>在之前的版本里，C#开发团队认为在Catch和Finally里使用Await是不可能，而现在他们在C#6里实现了它。</p>
<pre class="codehilite"><code class="language-C#">Resource res = null;
try
{
    res = await Resource.OpenAsync(); // You could always do this.  
}
catch (ResourceException e)
{
    await Resource.LogAsync(res, e); // Now you can do this … 
} 
finally
{
    if (res != null) await res.CloseAsync(); // … and this.
}</code></pre>


<h2 id="_2">五、表达式方法体<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>一句话的方法体可以直接写成箭头函数，而不再需要大括号</p>
<pre class="codehilite"><code class="language-C#"> class Program
 {
    private static string SayHello() =&gt; &quot;Hello World&quot;;
    private static string JackSayHello() =&gt; $&quot;Jack {SayHello()}&quot;;

    static void Main(string[] args)
    {
        Console.WriteLine(SayHello());
        Console.WriteLine(JackSayHello());

        Console.ReadLine();
    }
}</code></pre>


<h2 id="_3">六、自动属性初始化器<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>之前我们需要赋初始化值，一般需要这样</p>
<pre class="codehilite"><code class="language-C#">public class Person
{
    public int Age { get; set; }

    public Person()
    {
        Age = 100;
    }
}</code></pre>


<p>但是C# 6的新特性里我们这样赋值</p>
<pre class="codehilite"><code class="language-C#">public class Person
{
    public int Age { get; set; } = 100;
}</code></pre>


<h2 id="_4">七、只读自动属性<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>C# 1里我们可以这样实现只读属性</p>
<pre class="codehilite"><code class="language-C#">public class Person
{
    private int age=100;

    public int Age
    {
        get { return age; }
    }
}</code></pre>


<p>但是当我们有自动属性时，我们没办法实行只读属性，因为自动属性不支持readonly关键字，所以我们只能缩小访问权限</p>
<pre class="codehilite"><code class="language-C#">public class Person
{
    public  int Age { get; private set; }

}</code></pre>


<p>但是 C#6里我们可以实现readonly的自动属性了</p>
<pre class="codehilite"><code class="language-C#">public class Person
{
    public int Age { get; } = 100;
}</code></pre>


<h2 id="exception-filter">八、异常过滤器 Exception Filter<a class="headerlink" href="#exception-filter" title="Permanent link">&para;</a></h2>
<pre class="codehilite"><code class="language-C#">static void Main(string[] args)
{

    try
    {
        throw  new ArgumentException(&quot;Age&quot;);
    }
    catch (ArgumentException argumentException) when( argumentException.Message.Equals(&quot;Name&quot;))
    {
        throw  new ArgumentException(&quot;Name Exception&quot;);

    }

    catch (ArgumentException argumentException) when( argumentException.Message.Equals(&quot;Age&quot;))
    {
        throw new Exception(&quot;not handle&quot;);

    }
    catch  (Exception e)
    {

        throw;
    }
}</code></pre>


<p>在之前，一种异常只能被Catch一次，现在有了Filter后可以对相同的异常进行过滤，至于有什么用，那就是见仁见智了，我觉得上面的例子，定义两个具体的异常 NameArgumentException 和AgeArgumentException代码更易读。</p>
<h2 id="index">九、 Index 初始化器<a class="headerlink" href="#index" title="Permanent link">&para;</a></h2>
<p>这个主要是用在Dictionary上，至于有什么用，我目前没感觉到有一点用处，谁能知道很好的使用场景，欢迎补充:</p>
<pre class="codehilite"><code class="language-C#">var names = new Dictionary&lt;int, string&gt;
{
    [1] = &quot;Jack&quot;,
    [2] = &quot;Alex&quot;,
    [3] = &quot;Eric&quot;,
    [4] = &quot;Jo&quot;
};

foreach (var item in names)
{
    Console.WriteLine($&quot;{item.Key} = {item.Value}&quot;);
}</code></pre>


<h2 id="using-static-using">十、using 静态类的方法可以使用 static using<a class="headerlink" href="#using-static-using" title="Permanent link">&para;</a></h2>
<p>这个功能在我看来，同样是很没有用的功能，也为去掉前缀有的时候我们不知道这个是来自哪里的，而且如果有一个同名方法不知道具体用哪个，当然经证实是使用类本身的覆盖，但是容易搞混不是吗？</p>
<pre class="codehilite"><code class="language-C#">using System;
using static System.Math;
namespace CSharp6NewFeatures
 {
  class Program
  {
      static void Main(string[] args)
    {
        Console.WriteLine(Log10(5)+PI);
    }
  }
}</code></pre>


<p>总结
上面一到八我认为都是比较有用的新特性，后面的几个我觉得用处不大，当然如果找到合适的使用场景应该有用，欢迎大家补充。
最后，祝大家编程愉快。</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../c_docker/" class="btn btn-neutral float-right" title=".Ner Core Docker 部署">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../.." class="btn btn-neutral" title="介绍"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../.." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../c_docker/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
